<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<link rel="stylesheet" href="./assets/css/all.css">
</head>

<body>
	<div class="wrap">
		<div [class]="['wrap',nowPage]">
			<div class="head">
				<div class="logo" routerLink="/home">
					<a><img src="./assets/images/logo.svg" alt=""></a>
				</div>
				<button class="icon_btn _home" routerLink="/home"></button>
				<div class="user normal_sel">
					<!-- 點擊在span class裡面加上on -->
					<span class="normal_sel_title" [class.on]="menuShow" (click)="menuHandler()">Darren_KC_Huang</span>
					<ul class="normal_sel_group">
						<li class="normal_sel_item" (click)="logoutHandler()">Logout</li>
					</ul>
				</div>
			</div>
			<div class="container">
				<div class="container_title" data-tw="戰情平台">War room</div>
				<div class="warroom_content">
					<div class="warroom_all">
						<div class="warroom_all_title">全廠指標</div>
						<div class="warroom_all_item _people">
							<div class="num" data-unit="人">106</div>
							<div class="txt">作業人數</div>
						</div>
						<div class="warroom_all_item _attendance">
							<div class="num" data-unit="%">100</div>
							<div class="txt">人員出勤率</div>
						</div>
						<div class="warroom_all_item _input">
							<div class="num">100</div>
							<div class="txt">Input</div>
						</div>
						<div class="warroom_all_item _output">
							<div class="num">100</div>
							<div class="txt">Ouput</div>
						</div>
						<div class="warroom_all_item _achievement">
							<div class="num" data-unit="%">99</div>
							<div class="txt">達成率</div>
						</div>
					</div>
					<div class="warroom_info">
						<div class="warroom_head">
							<div class="normal_sel">
								<!-- 點擊在span class裡面加上on -->
								<span class="normal_sel_title" [class.on]="selectShow"
									(click)="selHandler()">{{selectTitle}}</span>
								<ul class="normal_sel_group">
									<li class="normal_sel_item" (click)="machineSel('機台顯示名稱1')">機台顯示名稱1</li>
									<li class="normal_sel_item" (click)="machineSel('機台顯示名稱2')">機台顯示名稱2</li>
								</ul>
							</div>
							<button class="normal_btn _primary _edit" (click)="editHandler()">編輯</button>
						</div>
						<!-- 點擊編輯按鈕 在下面class加上edit -->
						<div class="warroom_body" [class.edit]="isEdit">
							<div class="warroom_machine">
								<button class="icon_btn _del"></button>
								<ul class="warroom_machine_head">
									<li class="warroom_machine_li _title">
										<span class="warroom_machine_span">S12345</span>
										<span class="warroom_machine_span">YV3.5 MP FIO BO1ARD</span>
									</li>
									<li class="warroom_machine_li">
										<span class="warroom_machine_span">Input</span>
										<span class="warroom_machine_span" data-unit="(pcs)">200</span>
									</li>
									<li class="warroom_machine_li">
										<span class="warroom_machine_span">Output</span>
										<span class="warroom_machine_span" data-unit="(pcs)">100</span>
									</li>
									<li class="warroom_machine_li">
										<span class="warroom_machine_span">Mo工單</span>
										<span class="warroom_machine_span">000010091072</span>
									</li>
									<li class="warroom_machine_li">
										<span class="warroom_machine_span">稼動率 OEE</span>
										<span class="warroom_machine_span" data-unit="%">65</span>
									</li>
									<li class="warroom_machine_li">
										<span class="warroom_machine_span">產品達成率</span>
										<span class="warroom_machine_span" data-unit="%">100</span>
									</li>
									<li class="warroom_machine_li">
										<span class="warroom_machine_span">產品達成率</span>
										<span class="warroom_machine_span" data-unit="%">100</span>
									</li>
									<li class="warroom_machine_li _payment" data-unit="kwh">33653338</li>
									<li class="warroom_machine_li _water" data-unit="L">12345556</li>
									<li class="warroom_machine_li _total" data-l="共" data-r="機台">999</li>
								</ul>
								<div class="warroom_machine_outside">
									<button class="border_btn _add">
										<i></i>
										新增機台
									</button>
									<ul class="warroom_machine_group">
										<li id="item0" name="warroom_item" class="warroom_machine_item"
											data-txt="EQ_WAIT">
											<div class="state WAIT"></div>
											<div class="normal_machine"></div>
											<div class="name">PrintPrintPr123</div>
										</li>
										<li id="item1" name="warroom_item" class="warroom_machine_item"
											data-txt="EQ_WAIT">
											<div class="state PM"></div>
											<div class="normal_machine"></div>
											<div class="name">PrintPrintPr123</div>
										</li>
										<li id="item2" name="warroom_item" class="warroom_machine_item"
											data-txt="EQ_WAIT">
											<div class="state PD_RUN"></div>
											<div class="normal_machine"></div>
											<div class="name">PrintPrintPr123</div>
										</li>
									</ul>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="alert _newMachine" style="display: none;">
			<div class="alert_box">
				<button class="icon_btn _close"></button>
				<div class="alert_title">新増機台</div>
				<div class="machineName">S12345</div>
				<div class="machineDetail">YV3.5 MP FIO BOARD</div>
				<div class="txt">請選擇要加入線別之機台</div>
				<ul class="machine_box ">
					<li class="warroom_machine_item check" data-txt="EQ_WAIT">
						<div class="state WAIT"></div>
						<div class="normal_machine"></div>
						<div class="name">PrintPrintPr123</div>
					</li>
					<li class="warroom_machine_item" data-txt="EQ_WAIT">
						<div class="state WAIT"></div>
						<div class="normal_machine"></div>
						<div class="name">PrintPrintPr123</div>
					</li>
					<li class="warroom_machine_item" data-txt="EQ_WAIT">
						<div class="state WAIT"></div>
						<div class="normal_machine"></div>
						<div class="name">PrintPrintPr123</div>
					</li>
					<li class="warroom_machine_item" data-txt="EQ_WAIT">
						<div class="state WAIT"></div>
						<div class="normal_machine"></div>
						<div class="name">PrintPrintPr123</div>
					</li>
					<li class="warroom_machine_item" data-txt="EQ_WAIT">
						<div class="state WAIT"></div>
						<div class="normal_machine"></div>
						<div class="name">PrintPrintPr123</div>
					</li>
					<li class="warroom_machine_item" data-txt="EQ_WAIT">
						<div class="state WAIT"></div>
						<div class="normal_machine"></div>
						<div class="name">PrintPrintPr123</div>
					</li>
					<li class="warroom_machine_item" data-txt="EQ_WAIT">
						<div class="state WAIT"></div>
						<div class="normal_machine"></div>
						<div class="name">PrintPrintPr123</div>
					</li>
					<li class="warroom_machine_item" data-txt="EQ_WAIT">
						<div class="state WAIT"></div>
						<div class="normal_machine"></div>
						<div class="name">PrintPrintPr123</div>
					</li>
				</ul>
				<div class="alert_btnBox">
					<button class="normal_btn _secondry">取消</button>
					<button class="normal_btn _primary">確定</button>
				</div>
			</div>
		</div>

		<div class="alert _newLine" style="display: none;">
			<div class="alert_box">
				<button class="icon_btn _close"></button>
				<div class="alert_title">新増生產線</div>
				<div class="alert_info">
					<div class="normal_sel _hasMsg" data-msg="線別 / 別產品別">
						<!-- 點擊在span class裡面加上on -->
						<span class="normal_sel_title" [class.on]="selectShow"
							(click)="selHandler()">{{selectTitle}}</span>
						<ul class="normal_sel_group">
							<li class="normal_sel_item" (click)="machineSel('機台顯示名稱1')">機台顯示名稱1</li>
							<li class="normal_sel_item" (click)="machineSel('機台顯示名稱2')">機台顯示名稱2</li>
						</ul>
						<button class="icon_btn _add"></button>
					</div>

					<div class="normal_sel _hasMsg" data-msg="線別 / 別產品別">
						<!-- 點擊在span class裡面加上on -->
						<span class="normal_sel_title" [class.on]="selectShow"
							(click)="selHandler()">{{selectTitle}}</span>
						<ul class="normal_sel_group">
							<li class="normal_sel_item" (click)="machineSel('機台顯示名稱1')">機台顯示名稱1</li>
							<li class="normal_sel_item" (click)="machineSel('機台顯示名稱2')">機台顯示名稱2</li>
						</ul>
						<button class="icon_btn _minus"></button>
					</div>
				</div>
				<div class="alert_btnBox">
					<button class="normal_btn _secondry">取消</button>
					<button class="normal_btn _primary">確定</button>
				</div>
			</div>
		</div>

		<div class="alert _msg" style="display: none;">
			<div class="alert_box">
				<button class="icon_btn _close"></button>
				<div class="alert_title">儲存生產線編輯</div>
				<div class="alert_info">
					<span class="alert_info_txt">您確定要儲存變更？</span>
				</div>
				<div class="alert_btnBox">
					<button class="normal_btn _secondry">取消</button>
					<button class="normal_btn _primary">確定</button>
				</div>
			</div>
		</div>

		<div class="machine" style="display: none;">
			<button class="icon_btn _close"></button>
			<button class="icon_btn _prev"></button>
			<button class="icon_btn _next"></button>
			<div class="machine_head">
				<div class="pic">
					<img src="./assets/images/machine_pic.jpg" alt="">
				</div>
				<ul class="info">
					<li class="info_item _line" data-txt="線別：">S12345</li>
					<li class="info_item" data-txt="機台名：">Printer</li>
					<li class="info_item" data-txt="產品別：">YV3.5 MP FIO BOARD</li>
					<li class="info_item" data-txt="料號：">B91.04G10.000F</li>
					<li class="info_item" data-txt="稼動率：">90％</li>
					<li class="info_item" data-txt="程式名：">21X067-1-TOP</li>
				</ul>
			</div>
			<div class="machine_body">
				<div class="machine_result">
					<span>EQ_WAIT</span>
					<span>異常原因描述，目前由於停電，機器無法運做。</span>
				</div>
				<div class="machine_tbBox">
					<div class="title">關鍵參數監控</div>
					<table class="normal_tb">
						<tr>
							<th>項目</th>
							<th>參數</th>
							<th>範圍</th>
							<th>單位</th>
						</tr>
						<tr>
							<td>前刮刀壓力</td>
							<td>8</td>
							<td>6~12</td>
							<td>kg</td>
						</tr>
						<tr>
							<td>後刮刀壓力</td>
							<td>8</td>
							<td>6~12</td>
							<td>kg</td>
						</tr>
						<tr>
							<td>向前印刷速度</td>
							<td>40</td>
							<td>40~100</td>
							<td>mm/s</td>
						</tr>
						<tr>
							<td>向後印刷速度</td>
							<td>40</td>
							<td>40~100</td>
							<td>mm/s</td>
						</tr>
						<tr>
							<td>脫模速度</td>
							<td>0.2</td>
							<td>0~10</td>
							<td>mm/s</td>
						</tr>
						<tr>
							<td>脫模距離</td>
							<td>0.6</td>
							<td>0~3</td>
							<td>mm</td>
						</tr>
						<tr>
							<td>印刷空隙</td>
							<td>-0.8</td>
							<td>-1~1</td>
							<td>mm</td>
						</tr>
						<tr>
							<td>絲網擦拭頻率</td>
							<td>4</td>
							<td>0~8</td>
							<td>PCS</td>
						</tr>
						<tr>
							<td>溫度</td>
							<td>0</td>
							<td>22~28</td>
							<td>°C</td>
						</tr>
						<tr>
							<td>溫度</td>
							<td>53.1</td>
							<td>30~60</td>
							<td>RH%</td>
						</tr>
					</table>
				</div>
				<div class="machine_state">
					<div class="title">治具狀態</div>
					<ul class="group">
						<!-- 需要紅字 span 加上 limit -->
						<li class="item" data-name="鋼板">
							<span data-txt="使用次數" class="limit">20772</span>
							<span data-txt="使用上限">15000</span>
						</li>
						<li class="item" data-name="鋼板">
							<span data-txt="使用次數">12000</span>
							<span data-txt="使用上限">15000</span>
						</li>
					</ul>
				</div>
			</div>
		</div>

		<div class="line">
			<button class="icon_btn _close"></button>
			<ul class="normal_tab _large">
				<li class="normal_tab_item">Line</li>
				<li class="normal_tab_item on">Staff</li>
				<li class="normal_tab_item">Energy</li>
			</ul>
			<div class="line_info" style="display: none;">
				<ul class="normal_tab">
					<li class="normal_tab_item on">In/Output</li>
					<li class="normal_tab_item">產品達成率</li>
				</ul>
			</div>
			<div class="line_staff" style="display: none;">
				<ul class="line_staff_group">
					<li class="line_staff_item" data-txt="Process">SMT</li>
					<li class="line_staff_item" data-txt="Job">領班</li>
					<li class="line_staff_item" data-txt="工號">11106637F</li>
					<li class="line_staff_item" data-txt="姓名">王大明</li>
				</ul>
				<ul class="line_staff_group">
					<li class="line_staff_item" data-txt="Process">DIP</li>
					<li class="line_staff_item" data-txt="Job">全才</li>
					<li class="line_staff_item" data-txt="工號">234561G</li>
					<li class="line_staff_item" data-txt="姓名">陳大明</li>
				</ul>
				<ul class="line_staff_group">
					<li class="line_staff_item" data-txt="作業人數">3人</li>
					<li class="line_staff_txt " data-txt="標準人力：">5人</li>
				</ul>
			</div>
			<div class="line_energy">
				<ul class="line_energy_group">
					<li class="line_energy_item">
						<div class="pic _power"></div>
						<div class="txt" data-txt="電使用量">
							<span data-unit="Kwh">3653338</span>
						</div>
					</li>
					<li class="line_energy_item">
						<div class="pic _gas"></div>
						<div class="txt" data-txt="氣使用量">
							<span data-unit="PA">886633</span>
						</div>
					</li>
					<li class="line_energy_item">
						<div class="pic _water"></div>
						<div class="txt" data-txt="水使用量">
							<span data-unit="L">550000</span>
						</div>
					</li>
				</ul>
				<ul class="normal_tab">
					<li class="normal_tab_item on">電使用量</li>
					<li class="normal_tab_item">氣使用量</li>
					<li class="normal_tab_item">水使用量</li>
				</ul>
			</div>
		</div>
	</div>


	<script>
		var warroom_items = document.querySelectorAll("[name='warroom_item']");
		var itemX = 0
		var itemMx = 0
		var itemNum = null
		var itemMoveNum = 0
		var itemLast
		for (let i = 0; i < warroom_items.length; i++) {
			itemLast = i
			warroom_items[i].addEventListener("mousedown", itemDown);
		}
		function itemDown(e) {
			this.addEventListener("mousemove", itemMove);
			window.addEventListener("mouseup", itemUp);
			this.classList.add("top");
			itemX = e.clientX;
			itemNum = parseInt(this.id.split("item")[1]);
			itemMoveNum = parseInt(itemNum);
			console.log('itemLast', itemLast);
		}

		function itemMove(e) {
			itemMx = e.clientX
			let newX = itemMx - itemX
			console.log('itemMoveNum', itemMoveNum);

			if (itemNum == 0 && newX > (itemMoveNum + 1) * 50 && itemMoveNum < itemLast) {
				changItem(itemMoveNum + 1)
				itemMoveNum++
			}
			this.style = `transform:translateX(${newX}px);transition: all 0s;}`;
		}
		function itemUp() {
			console.log('itemUp');
			warroom_items[itemNum].style = `transform:translateX(${itemMoveNum * 100}%);transition: all 0.3s ease-in-out;}`;
			setTimeout(() => {
				warroom_items[itemNum].classList.remove("top")
			}, 300);
			warroom_items[itemNum].removeEventListener("mousemove", itemMove)
			window.removeEventListener("mouseup", itemUp)
		}

		function changItem(n) {
			warroom_items[n].style = `transform:translateX(-100%);transition: all 0.3s ease-in-out;}`;
		}
	</script>
</body>

</html>